{
  "id": "googlechat",
  "name": "Google Chat",
  "description": "Google Chat channel via Pub/Sub webhooks",
  "channels": ["googlechat"],
  "configSchema": {
    "schema": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "projectId": {
          "type": "string"
        },
        "subscriptionName": {
          "type": "string"
        },
        "credentialsPath": {
          "type": "string"
        },
        "webhookMode": {
          "type": "boolean",
          "default": false
        },
        "webhookPort": {
          "type": "number",
          "default": 8790
        },
        "webhookHost": {
          "type": "string",
          "default": "0.0.0.0"
        },
        "webhookPath": {
          "type": "string",
          "default": "/google-chat-webhook"
        },
        "webhookPublicUrl": {
          "type": "string"
        },
        "allowFrom": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": []
        },
        "dmPolicy": {
          "enum": ["open", "allowlist", "pairing", "disabled"],
          "default": "pairing"
        },
        "spacePolicy": {
          "enum": ["open", "allowlist", "pairing", "disabled"],
          "default": "closed"
        },
        "historyLimit": {
          "type": "number",
          "default": 20
        },
        "accounts": {
          "type": "object",
          "additionalProperties": {
            "type": "object"
          }
        }
      }
    },
    "uiHints": {
      "projectId": {
        "label": "Google Cloud Project ID",
        "help": "Your GCP project ID (e.g., my-project-123)"
      },
      "subscriptionName": {
        "label": "Pub/Sub Subscription",
        "help": "Full subscription path: projects/PROJECT_ID/subscriptions/SUBSCRIPTION_NAME"
      },
      "credentialsPath": {
        "label": "Service Account Credentials",
        "help": "Path to service account JSON file",
        "sensitive": true
      },
      "allowFrom": {
        "label": "Allowed Email Addresses",
        "help": "Email addresses allowed to message the bot"
      },
      "dmPolicy": {
        "label": "Direct Message Policy",
        "help": "How to handle DMs: open (anyone), pairing (allowlist), closed (disabled)"
      },
      "spacePolicy": {
        "label": "Space/Group Policy",
        "help": "How to handle spaces: open (any space), pairing (allowlist), closed (disabled)"
      },
      "webhookMode": {
        "label": "Use Webhook Mode",
        "help": "Enable HTTP webhook mode instead of Pub/Sub (required for new Google Chat bots)"
      },
      "webhookPort": {
        "label": "Webhook Port",
        "help": "Port for webhook server (default: 8790)",
        "advanced": true
      },
      "webhookHost": {
        "label": "Webhook Host",
        "help": "Host binding for webhook server (default: 0.0.0.0)",
        "advanced": true
      },
      "webhookPath": {
        "label": "Webhook Path",
        "help": "URL path for webhook endpoint (default: /google-chat-webhook)",
        "advanced": true
      },
      "webhookPublicUrl": {
        "label": "Public Webhook URL",
        "help": "Full public URL for this webhook (e.g., https://your-domain.com/google-chat-webhook)"
      }
    }
  }
}
